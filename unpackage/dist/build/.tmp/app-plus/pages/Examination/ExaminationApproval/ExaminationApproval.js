(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Examination/ExaminationApproval/ExaminationApproval"],{"14b6":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},o=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return o})},"2ef1":function(t,e,a){"use strict";a.r(e);var n=a("14b6"),o=a("e2c2");for(var i in o)"default"!==i&&function(t){a.d(e,t,function(){return o[t]})}(i);a("6974");var s=a("2877"),r=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports},"5f0a":function(t,e,a){"use strict";(function(t){a("d7b2"),a("921b");n(a("66fd"));var e=n(a("2ef1"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},6974:function(t,e,a){"use strict";var n=a("dcb8"),o=a.n(n);o.a},"7e72":function(module,exports,__webpack_require__){"use strict";(function(uni,__f__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _regenerator=_interopRequireDefault(__webpack_require__("a34a")),_md=_interopRequireDefault(__webpack_require__("ed11")),_util=_interopRequireDefault(__webpack_require__("d45d")),_vuex=__webpack_require__("2f62");function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function asyncGeneratorStep(t,e,a,n,o,i,s){try{var r=t[i](s),u=r.value}catch(l){return void a(l)}r.done?e(u):Promise.resolve(u).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,a=arguments;return new Promise(function(n,o){var i=t.apply(e,a);function s(t){asyncGeneratorStep(i,n,o,s,r,"next",t)}function r(t){asyncGeneratorStep(i,n,o,s,r,"throw",t)}s(void 0)})}}var keys=function(){var t=[0,1,2,3,4,5,6,7,8,9];return t.sort(function(){return Math.random()>.5?-1:1})},simpleDialog=function(){return __webpack_require__.e("components/dialog").then(__webpack_require__.bind(null,"6123"))},wPicker=function(){return Promise.all([__webpack_require__.e("common/vendor"),__webpack_require__.e("components/w-picker/w-picker")]).then(__webpack_require__.bind(null,"c27b"))},_default={components:{simpleDialog:simpleDialog,wPicker:wPicker},computed:{mode:function(){return this.tabList[this.tabIndexs].mode},defaultVal:function(){return this.tabList[this.tabIndexs].value}},data:function(){return{scrollLeft:0,isClickChange:!1,tabIndex:0,pattern:"hidden",keyss:keys(),password:!1,PowerFlag:!1,PsdArr:[],PasswordList:[{id:1,flag:!1},{id:2,flag:!1},{id:3,flag:!1},{id:4,flag:!1},{id:5,flag:!1},{id:6,flag:!1}],loadingtext:"",newsitems:[{id:0,arrlist:[{img:"../../../static/app-plus/img_lijilingqu_quan.png",text:"礼品价格",yxb:"油信宝加油券",time:"2019/05/24",Ts:"支付时抵扣"}],flag:!0},{id:1,arrlist:[{img:"../../../static/app-plus/img_lijilingqu_quan.png",text:"礼品价格",yxb:"油信宝加油券",time:"2019/05/24",Ts:"支付时抵扣"}],flag:!1}],newsitemss:[],tabBars:[{name:"我的申请",id:0,flag:!0},{name:"我的审批",id:1,flag:!1}],sDialog:{message:"确认通过审批?",title:""},Whether:!0,datas:{user_id:"",month:""},tabList:[{mode:"yearMonth",name:"",value:[0,1]}],tabIndexs:0,newsitemssflag:!1,Powerlist:[],Powerfalsetrue:!1,Powerjson:"",UserIDs:"",PowerMonth:"",PowerMonthFlag:0}},mounted:function(){var t=this;this.$api.ChekcToken(this.$store.state.UserLogin.SessionFlag).then(function(e){if(0!=e.data.result)return uni.showToast({title:"你的账户已在别处登录，如不是本人请尽快修改密码",duration:2e3,icon:"none"}),t.$store.commit("RemoveLoginOut"),void setTimeout(function(){uni.navigateTo({url:"/pages/login/UserLoginPhone/UserLoginPhone",animationType:"pop-in",animationDuration:200})},2e3);t.getSQcord(),t.Auditauthority()})},methods:{onConfirm:function(t){console.log(__f__(t," at pages\\Examination\\ExaminationApproval\\ExaminationApproval.vue:251")),this.tabList[0].name=t.result,0==this.PowerMonthFlag?(this.datas.month=t.result,this.getSQcord()):(this.PowerMonth=t.result,this.GetPowerList())},Auditauthority:function(){var t=this,e=this,a={user_id:this.$store.state.UserLogin.UserInfo.user_id};this.$api.AuthPowerInfo(a).then(function(a){console.log(__f__(a," at pages\\Examination\\ExaminationApproval\\ExaminationApproval.vue:271")),0==a.data.result&&(e.UserIDs=a.data.data.user_id,e.tabBars.forEach(function(t){t.flag=!0}),e.newsitems.forEach(function(t){t.flag=!0}),e.PowerFlag=!0,t.GetPowerList())}),console.log(__f__(a," at pages\\Examination\\ExaminationApproval\\ExaminationApproval.vue:285"))},GetPowerList:function GetPowerList(){this.Powerlist=[];var _this=this,myDate=new Date,year=myDate.getFullYear(),month=myDate.getMonth()+1;month<10&&(month="0"+month);var Month=year+"-"+month,phone=this.$store.state.UserLogin.UserInfo.phone.trim(),data={auth_name:phone,month:this.PowerMonth};this.$api.AuthInfoList(data).then(function(res){console.log(__f__(res," at pages\\Examination\\ExaminationApproval\\ExaminationApproval.vue:303")),1!=res.data.result?res.data.data.forEach(function(items){items.forEach(function(item){var obj=item;obj.data_create_time=eval("new "+obj.data_create_time.replace(/\//g,""));var month=obj.data_create_time.getMonth()+1,day=obj.data_create_time.getDate(),hours=obj.data_create_time.getHours(),minutes=obj.data_create_time.getMinutes(),seconds=obj.data_create_time.getSeconds();month<10&&(month="0"+month),hours<10&&(hours="0"+hours),minutes<10&&(minutes="0"+minutes),seconds<10&&(seconds="0"+seconds),day<10&&(day="0"+day),obj.data_create_time=obj.data_create_time.getFullYear()+"-"+month+"-"+day+" "+hours+":"+minutes+":"+seconds,_this.Powerlist.push(obj)}),console.log(__f__("aaaaaaaaaaaaaaaaaaa"," at pages\\Examination\\ExaminationApproval\\ExaminationApproval.vue:337")),console.log(__f__(_this.Powerlist," at pages\\Examination\\ExaminationApproval\\ExaminationApproval.vue:338"))}):_this.Powerlist=[]}),console.log(__f__(data," at pages\\Examination\\ExaminationApproval\\ExaminationApproval.vue:341"))},DelNumbers:function(){var t=this;0!=this.PsdArr.length&&(this.PsdArr.pop(),console.log(__f__(this.PsdArr," at pages\\Examination\\ExaminationApproval\\ExaminationApproval.vue:349")),this.PasswordList.forEach(function(t,e){t.flag=!1}),this.PsdArr.forEach(function(e,a){t.PasswordList[a].flag=!0,console.log(__f__(t.PasswordList[a].flag," at pages\\Examination\\ExaminationApproval\\ExaminationApproval.vue:355"))}))},closepay:function(){this.password=!1},GetNumbers:function(t){var e=this;this.$api.ChekcToken(this.$store.state.UserLogin.SessionFlag).then(function(a){if(0!=a.data.result)return uni.showToast({title:"你的账户已在别处登录，如不是本人请尽快修改密码",duration:2e3,icon:"none"}),e.$store.commit("RemoveLoginOut"),n.diskif=!1,n.closepay(),n.PsdArr=[],e.PsdArr.forEach(function(t,e){n.PasswordList[e].flag=!0}),e.PasswordList.forEach(function(t,e){t.flag=!1}),void setTimeout(function(){uni.navigateTo({url:"/pages/login/UserLoginPhone/UserLoginPhone",animationType:"pop-in",animationDuration:200})},2e3);var n=e;if(e.PsdArr.push(t),6!=e.PsdArr.length)e.PsdArr.forEach(function(t,e){n.PasswordList[e].flag=!0}),console.log(__f__(e.PsdArr," at pages\\Examination\\ExaminationApproval\\ExaminationApproval.vue:462"));else{var o=e.PsdArr.join("");console.log(__f__(o," at pages\\Examination\\ExaminationApproval\\ExaminationApproval.vue:392"));var i={id:e.Powerjson.id,auth_name:e.Powerjson.auth_name,state:""};e.Powerfalsetrue?i.state=1:i.state=2;var s=(0,_md.default)(o),r=_util.default.encrypt(JSON.stringify(i),s),u={user_id:e.UserIDs,post_params:r};e.$api.ApplyInfoAuth(u).then(function(t){console.log(__f__(t," at pages\\Examination\\ExaminationApproval\\ExaminationApproval.vue:411")),e.$refs.loading.open(),e.password=!1,setTimeout(function(){if(1==t.data.result)return n.GetPowerList(),n.diskif=!1,n.closepay(),n.PsdArr=[],e.PasswordList.forEach(function(t,e){t.flag=!1}),e.$refs.loading.close(),void uni.showToast({title:t.data.message,duration:1e3,icon:"none"});n.GetPowerList(),n.getSQcord(),n.diskif=!1,n.closepay(),n.PsdArr=[],e.PasswordList.forEach(function(t,e){t.flag=!1}),e.$refs.loading.close(),n.Powerfalsetrue?uni.showToast({title:"已审批为通过",duration:1e3,icon:"none"}):uni.showToast({title:"已审批为不通过",duration:1e3,icon:"none"})},1e3)})}})},backPay:function(){this.payone=!this.payone,this.password=!this.password},getSQcord:function getSQcord(){var _this=this;_this.newsitemss=[],this.datas.user_id=this.$store.state.UserLogin.UserInfo.user_id,console.log(__f__(this.datas.user_id," at pages\\Examination\\ExaminationApproval\\ExaminationApproval.vue:474")),this.$api.ReserveApplyList(this.datas).then(function(res){if(console.log(__f__(res," at pages\\Examination\\ExaminationApproval\\ExaminationApproval.vue:476")),1==res.data.result)return console.log(__f__("暂无申请记录信息"," at pages\\Examination\\ExaminationApproval\\ExaminationApproval.vue:478")),void(_this.newsitemssflag=!1);res.data.data.forEach(function(item){_this.newsitemssflag=!0;var obj=item;obj.data_create_time=eval("new "+obj.data_create_time.replace(/\//g,""));var month=obj.data_create_time.getMonth()+1,day=obj.data_create_time.getDate(),hours=obj.data_create_time.getHours(),minutes=obj.data_create_time.getMinutes(),seconds=obj.data_create_time.getSeconds();month<10&&(month="0"+month),hours<10&&(hours="0"+hours),minutes<10&&(minutes="0"+minutes),seconds<10&&(seconds="0"+seconds),day<10&&(day="0"+day),obj.data_create_time=obj.data_create_time.getFullYear()+"-"+month+"-"+day+" "+hours+":"+minutes+":"+seconds,0==obj.data_state&&(obj.text='您的用车申请"'.concat(obj.apply_gold,'"元正在审核')),1==obj.data_state&&(obj.text='您的用车申请"'.concat(obj.apply_gold,'"元已通过')),2==obj.data_state&&(obj.text='您的用车申请"'.concat(obj.apply_gold,'"元未通过审核')),_this.newsitemss.push(obj),console.log(__f__(_this.newsitemss," at pages\\Examination\\ExaminationApproval\\ExaminationApproval.vue:519"))})})},openDate:function(t){this.PowerMonthFlag=t,this.$refs.picker.show()},Whetheradopt:function(t,e){if(this.Powerjson=e,console.log(__f__(this.Powerjson," at pages\\Examination\\ExaminationApproval\\ExaminationApproval.vue:530")),t)return this.Powerfalsetrue=!0,this.sDialog.message="确认通过审批?",void this.TsMsg();this.Powerfalsetrue=!1,this.sDialog.message="确认不通过审批?",this.TsMsg()},TsMsg:function(){this.$refs.simpleDialog2.confirm({title:"提示！",message:this.sDialog.message})},confirmButton:function(){var t=this;console.log(__f__("Dialog 确定按钮点击"," at pages\\Examination\\ExaminationApproval\\ExaminationApproval.vue:549")),this.$refs.loading.open(),setTimeout(function(){t.$refs.loading.close(),t.password=!0},1e3)},cancelButton:function(){console.log(__f__("Dialog 取消按钮点击"," at pages\\Examination\\ExaminationApproval\\ExaminationApproval.vue:558"))},goDetail:function(t){uni.navigateTo({url:"/pages/template/tabbar/detail/detail?data="+t.title})},loadMore:function(t){var e=this;this.newsitems[t].loadingType=1,setTimeout(function(){e.addData(t)},1200)},addData:function(t){if(this.newsitems[t].data.length>30)this.newsitems[t].loadingType=2;else{for(var e=1;e<=10;e++)this.newsitems[t].data.push(this["data"+Math.floor(5*Math.random())]);this.newsitems[t].loadingType=1}},changeTab:function(){var t=_asyncToGenerator(_regenerator.default.mark(function t(e){var a;return _regenerator.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.detail.current,console.log(__f__(a," at pages\\Examination\\ExaminationApproval\\ExaminationApproval.vue:583")),this.isClickChange){t.next=6;break}return this.tabIndex=a,this.isClickChange=!1,t.abrupt("return");case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),getElSize:function(t){return new Promise(function(e,a){uni.createSelectorQuery().select("#"+t).fields({size:!0,scrollOffset:!0},function(t){e(t)}).exec()})},tapTab:function(){var t=_asyncToGenerator(_regenerator.default.mark(function t(e){var a,n;return _regenerator.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.tabIndex!==e){t.next=4;break}return t.abrupt("return",!1);case 4:return t.next=6,this.getElSize("tab-bar");case 6:a=t.sent,n=a.scrollLeft,this.scrollLeft=n,this.isClickChange=!1,this.tabIndex=e;case 11:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),randomfn:function(){for(var t=[],e=0,a=this.tabBars.length;e<a;e++){for(var n={loadingType:e,data:[]},o=1;o<=10;o++)n.data.push(this["data"+Math.floor(5*Math.random())]);t.push(n)}return t}}};exports.default=_default}).call(this,__webpack_require__("6e42")["default"],__webpack_require__("0de9")["default"])},dcb8:function(t,e,a){},e2c2:function(t,e,a){"use strict";a.r(e);var n=a("7e72"),o=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=o.a}},[["5f0a","common/runtime","common/vendor"]]]);